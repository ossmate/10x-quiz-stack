---
import ManagementLayout from "../../../layouts/ManagementLayout.astro";
import { AIQuizGenerator } from "../../../components/quizzes/AIQuizGenerator";
import { Breadcrumbs } from "../../../components/management/Breadcrumbs";
import type { BreadcrumbItem } from "../../../types/management.types";

// TESTING: Authentication check disabled for easier development
// In production, uncomment and use these lines instead:
/*
// Get the user session from Supabase directly
const {
  data: { session },
} = await supabaseClient.auth.getSession();

// If not authenticated, redirect to login
if (!session) {
  return Astro.redirect("/login?redirect=" + encodeURIComponent(Astro.url.pathname));
}
*/

// Set prerender to false as this page requires authentication
export const prerender = false;

// Define breadcrumbs
const breadcrumbs: BreadcrumbItem[] = [
  { label: "Dashboard", path: "/" },
  { label: "Generate AI Quiz", path: "/quizzes/ai/generate", isCurrent: true },
];
---

<ManagementLayout title="Generate AI Quiz">
  <Breadcrumbs client:load items={breadcrumbs} />

  <div class="mb-6">
    <h1 class="text-3xl font-bold text-gray-900">Generate Quiz with AI</h1>
    <p class="text-gray-600 mt-2">Create a quiz automatically using AI by providing a descriptive prompt</p>
  </div>

  <div class="bg-white rounded-lg shadow-md p-6">
    <AIQuizGenerator client:load />
  </div>
</ManagementLayout>
